{"version":3,"sources":["jswe.js"],"names":["e","t","config","wxconfig","wxData","debug","imgUrl","link","desc","title","timeLine","wxConfig","hide","close","jsApiList","wxApiFun","isOpenOnPC","ua","navigator","userAgent","test","isOpenInWeixin","getWeixinVersion","mt","match","isWeixinVersion","version","toLowerCase","indexOf","hideOptionMenu","update","showOptionMenu","closeWindow","wxReady","data","wx","appId","result","timestamp","nonceStr","signature","callbacks","trigger","res","JSWE","wxTrigger","success","wxSuccess","cancel","wxCancel","fail","wxFail","shareInfo","flag","_share","wxApi","onMenuShareAppMessage","onMenuShareTimeline","onMenuShareQQ","onMenuShareWeibo","ready","$","ajax","url","type","dataType","callback","JSON","stringify","method","params","window","location","href","split","initWxData","d","fixedWxData","changeWxData","key","value","falDwxDataata","v","V"],"mappings":"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","file":"jswe.js","sourcesContent":["!(function (e, t) {\n  var config = {\n    wxconfig: 'http://www.qianbaoxia.com/system/request.action'\n  },\n  wxData = {\n    debug: false,\n    imgUrl: '',\n    link: '',\n    desc: '',\n    title: '',\n    timeLine: ''\n  },\n  wxConfig = {\n    hide: false,\n    close: false\n  },\n  jsApiList = [\n    'checkJsApi',\n    'onMenuShareTimeline',\n    'onMenuShareAppMessage',\n    'onMenuShareQQ',\n    'onMenuShareWeibo',\n    'hideMenuItems',\n    'showMenuItems',\n    'hideAllNonBaseMenuItem',\n    'showAllNonBaseMenuItem',\n    'translateVoice',\n    'startRecord',\n    'stopRecord',\n    'onRecordEnd',\n    'playVoice',\n    'pauseVoice',\n    'stopVoice',\n    'uploadVoice',\n    'downloadVoice',\n    'chooseImage',\n    'previewImage',\n    'uploadImage',\n    'downloadImage',\n    'getNetworkType',\n    'openLocation',\n    'getLocation',\n    'hideOptionMenu',\n    'showOptionMenu',\n    'closeWindow',\n    'scanQRCode',\n    'chooseWXPay',\n    'openProductSpecificView',\n    'addCard',\n    'chooseCard',\n    'openCard'\n  ],\n  wxApiFun\n\n  function isOpenOnPC () { // 判断当前网页是否在 PC 浏览器中打开\n    var ua = navigator.userAgent\n    return /windows nt/i.test(ua) || /macintosh/i.test(ua) || /linux x86_64/i.test(ua)\n  }\n\n  function isOpenInWeixin () { // 判断当前网页是否在微信内置浏览器中打开\n    return /micromessenger/i.test(navigator.userAgent)\n  }\n\n  function getWeixinVersion () {\n    var ua = navigator.userAgent,\n      mt = ua.match(/micromessenger\\/([\\d.]+)/i)\n    return (mt ? mt[1] : '')\n  }\n\n  // This function checks whether Wechat is the appointed version or not\n  // Cmp: http://jsperf.com/regexp-test-vs-indexof-ignore-upper-and-lower\n  function isWeixinVersion (version) {\n    // return new RegExp('micromessenger/' + version , 'i').test(navigator.userAgent)\n    return navigator.userAgent.toLowerCase().indexOf('micromessenger/' + version) !== -1\n  }\n\n  function hideOptionMenu () {\n    wxConfig.hide = true\n    update()\n  }\n\n  function showOptionMenu () {\n    wxConfig.hide = false\n    update()\n  }\n\n  function closeWindow () {\n    wxConfig.close = true\n    update()\n  }\n\n  function wxReady (data) {\n    wx.config({\n      debug: wxData.debug,\n      appId: data.result.appId,\n      timestamp: data.result.timestamp,\n      nonceStr: data.result.nonceStr,\n      signature: data.result.signature,\n      jsApiList: jsApiList\n    })\n\n    var callbacks = {\n        trigger: function (res) {\n          // alert('用户点击发送给朋友')\n          if (JSWE.wxTrigger) {\n            JSWE.wxTrigger()\n          }\n        },\n        success: function (res) {\n          // alert('已分享')\n          if (JSWE.wxSuccess) {\n            JSWE.wxSuccess()\n          }\n        },\n        cancel: function (res) {\n          // alert('已取消')\n          if (JSWE.wxCancel) {\n            JSWE.wxCancel()\n          }\n        },\n        fail: function (res) {\n          // alert(JSON.stringify(res))\n          if (JSWE.wxFail) {\n            JSWE.wxFail()\n          }\n        }\n      },\n      shareInfo = function (flag) {\n        var _share = {\n          title: flag ? wxData.title : (wxData.timeLine || wxData.desc),\n          link: wxData.link,\n          imgUrl: wxData.imgUrl,\n          trigger: callbacks.trigger,\n          success: callbacks.success,\n          cancel: callbacks.cancel,\n          fail: callbacks.fail\n        }\n        if (flag) _share.desc = wxData.desc\n        return _share\n      },\n      wxApi = function () {\n        // 2. 分享接口\n        // 2.1 监听“分享给朋友”，按钮点击、自定义分享内容及分享结果接口\n        wx.onMenuShareAppMessage(shareInfo(1))\n          // 2.2 监听“分享到朋友圈”按钮点击、自定义分享内容及分享结果接口\n        wx.onMenuShareTimeline(shareInfo(0))\n          // 2.3 监听“分享到QQ”按钮点击、自定义分享内容及分享结果接口\n        wx.onMenuShareQQ(shareInfo(1))\n          // 2.4 监听“分享到微博”按钮点击、自定义分享内容及分享结果接口\n        wx.onMenuShareWeibo(shareInfo(1))\n          // 8 界面操作接口\n          // 8.1 隐藏右上角菜单\n          // 8.2 显示右上角菜单\n        if (wxConfig.hide) {\n          wx.hideOptionMenu()\n        } else {\n          wx.showOptionMenu()\n        }\n        // 8.7 关闭当前窗口\n        if (wxConfig.close) {\n          wx.closeWindow()\n        }\n      }\n\n    wx.ready(wxApi)\n\n    return (wxApiFun = wxApi)\n  }\n\n  if (isOpenInWeixin() || isOpenOnPC()) {\n    $.ajax({\n      url: config.wxconfig,\n      type: 'get',\n      dataType: 'jsonp',\n      callback: 'callback',\n      data: {\n        data:JSON.stringify({\n    \t\t  method:\"getJsapiSignature\",\n    \t\t  params:{\n    \t\t\t  url: window.location.href.split('#')[0]\n    \t\t  }\n    \t  })\n      },\n      success: wxReady\n    })\n  }\n\n  function initWxData (data, flag) {\n    for (var d in data) {\n      if (d in wxData) wxData[d] = data[d]\n    }\n    if (flag) fixedWxData()\n  }\n\n  function changeWxData (key, value, flag) {\n    if (key in falDwxDataata) wxData[key] = value\n    if (flag) fixedWxData()\n  }\n\n  function fixedWxData () {\n    if (typeof wxApiFun !== 'undefined') wxApiFun()\n  }\n\n  var v = {\n    version: '1.0.0',\n\n    // Basic Vars\n    config: config,\n    wxData: wxData,\n    jsApiList: jsApiList,\n\n    // Weixin Function\n    isOpenInWeixin: isOpenInWeixin,\n    getWeixinVersion: getWeixinVersion,\n    isWeixinVersion: isWeixinVersion,\n\n    // Menu Function\n    hideOptionMenu: hideOptionMenu,\n    showOptionMenu: showOptionMenu,\n    closeWindow: closeWindow,\n\n    // Share Function\n    initWxData: initWxData,\n    changeWxData: changeWxData,\n    fixedWxData: fixedWxData\n  }\n  e.JSWE = e.V = v\n})(window)\n"]}